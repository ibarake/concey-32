<header>
  {% if section.settings.show_announcement %}
    {% if section.settings['announcement-link'] %}
      <a href="{{ section.settings.announcement-link }}" class="announcement">
        {{- section.settings.announcement_text -}}
      </a>
    {% else %}
      <p class="announcement">{{ section.settings.announcement_text }}</p>
    {% endif %}
  {% endif %}
  <div class="main-header">
    {% if menu-style %}
      <div class="nav-icon nav-button">
        {% render 'nav-icon' %}
      </div>
    {% else %}
      <div class="nav-icon nav-button-2">
        {% render 'nav-icon' %}
      </div>
    {% endif %}
    <div class="site-logo">
      {{ settings.logo | image_url: width: '150px' | image_tag }}
    </div>

    <div class="nav-icon cart-drawer-toggle">
      <button class="cart-btn" onclick="window.openCartDrawer()">{% render 'cart-icon' %}</button>
      <!-- <button class="cart-btn" onclick="window.openCartDrawer()">{% render 'add-to-cart-icon' %}</button> -->
    </div>
  </div>
  <nav>
    <ul class="header-menu">
      {% for link in section.settings['main-menu'].links %}
        <li class="menu-item">
          <a href="{{ link.url }}" class="menu-item-link">{{ link.title }}</a>
        </li>
      {% endfor %}
    </ul>
  </nav>
  <script>
        document.addEventListener('DOMContentLoaded', function() {
      var header = document.querySelector('header');
      var initialHeight = header.offsetHeight;

      window.addEventListener('scroll', function() {
        if (window.scrollY > initialHeight) {
          header.classList.add('shrink');
        } else {
          header.classList.remove('shrink');
        }
      });
    });
  </script>
</header>
{% schema %}
{
  "name": "header",
  "settings": [
    {
      "type": "link_list",
      "id": "main-menu",
      "label": "Menu"
    },
    {
      "type": "checkbox",
      "id": "show_announcement",
      "label": "Show announcement",
      "default": true
    },
    {
      "type": "text",
      "id": "announcement_text",
      "label": "announcement text",
      "default": "This is the announcement bar"
    },
    {
      "type": "url",
      "id": "announcement-link",
      "label": "announcement link"
    },
    {
      "type": "checkbox",
      "id": "menu-style",
      "label": "Change menu style",
      "default": true
    }
  ]
}
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}
