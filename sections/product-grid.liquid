  <section class="product-grid">
    <script src="{{ 'product-grid.js' | asset_url }}" defer></script>
    <div class="product-section">
      <div class="product-header">
        <h2 class="section-title">{{ section.settings.title }}</h2>
        <div class="slick-buttons">
          <button class="slick-prev-c" onclick="() => $('.slick-carousel').slick('slickPrev')">
            {% render 'arrow-left-icon' %}
          </button>
          <button class="slick-next-c" onclick="() => $('.slick-carousel').slick('slickNext')">
            {% render 'arrow-right-icon' %}
          </button>
        </div>
      </div>
      <div class="slick-carousel">
        {% for product in section.settings.collection.products %}
          <div class="product">
            {{ product.images.first.src | image_url: width: '500' | image_tag }}
            <div class="product-footer">
              <h4 class="product-collection">{{ product.collections[1].title }}</h4>
              <h3 class="product-title">{{ product.title }}</h3>
              <div class="price-cart">
                <p class="price">{{ product.price }}</p>
                <div class="cart-add">
                  <div class="qty-input">
                  	<button class="qty-count qty-count--minus" data-action="minus" type="button">-</button>
                  	<input class="product-qty" type="number" name="product-qty" min="0" max="10" value="1">
                  	<button class="qty-count qty-count--add" data-action="add" type="button">+</button>
                  </div>
                  <button type="submit" class="add-to-cart-bag-btn" data-variant-id="{{ product.id }}">
                    {% render 'add-to-cart-icon' %}
                  </button>
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </section>

  <script>
    $('.slick-prev-c').on('click', () => {
      $('.slick-carousel').slick('slickPrev')
    });
    $('.slick-next-c').on('click', () => {
      $('.slick-carousel').slick('slickNext')
    });
    $(document).ready(function() {
  // Handle the add to cart button click
  $('.add-to-cart-bag-btn').on('click', function(event) {
    event.preventDefault(); // Prevent the default action

    const variantId = $(this).data('variant-id');  // Retrieve the variant ID
    const quantity = $(this).closest('.cart-add').find('.product-qty').val();  // Retrieve the quantity

    // Send an AJAX request to Shopify's cart API
    $.ajax({
      type: 'POST',
      url: '/cart/add.js',
      data: {
        quantity: quantity,
        id: variantId
      },
      dataType: 'json',
      success: function() {
        alert('Product added to cart successfully!');
        // You can also redirect the user to the cart page or update the cart counter here
      },
      error: function() {
        alert('There was an error adding the product to the cart.');
      }
    });
  });
});

  </script>
{% schema %}
{
  "name": "product grid",
  "settings": [
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Featured Items"
    }
  ],
  "presets": [
    {
      "name": "product grid"
    }
  ]
}
{% endschema %}
